---
import Layout from "../layouts/Layout.astro";

//import { useTranslations } from "../i18n/languages";
//import { getLanguageFromUrl } from "../lib/language";
import { useTranslations, defaultLanguage } from "../i18n/languages";
//const lang = getLanguageFromUrl(Astro.url);
//const t = useTranslations(lang);
// Obtener el idioma actual
const lang = (Astro.locals as any)?.lang || defaultLanguage;
const t = useTranslations(lang);
---

<Layout
  title={`${t("about_title")} - Rodar y Rodar`}
  description={`${t("about_title")} - Rodar y Rodar`}
>
  <div class="container mx-auto px-4 py-12">
    <!--  <h1 class="text-4xl font-bold mb-8 text-center">{t("about_title")}</h1> -->

    <!-- Imagen principal -->
    <!-- <div class="w-11/12 md:w-4/5 lg:w-3/4 mx-auto mb-16">
      <img
        src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755987560/familia_yiiqzo_jurle2_7b1c3d_cropped_msptle.jpg"
        alt="Rodar y Rodar panorámica"
        class="w-full h-auto rounded-lg shadow-lg"
      />
    </div> -->
    <section class="mb-16">
      <h2 class="text-3xl font-bold mb-10 text-center">
        {t("management_team")}
      </h2>
      <!-- Equipo directivo -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Director 1 -->
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden"
        >
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center mb-6">
              <div
                class="w-32 h-32 rounded-full overflow-hidden mb-4 sm:mb-0 sm:mr-6"
              >
                <img
                  src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755987561/DSC06420_cropped_j41num.jpg"
                  alt="Joaquín Padró"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="text-center sm:text-left">
                <h3 class="text-2xl font-bold mb-2">Joaquín Padró</h3>
              </div>
            </div>
            <div class="relative bio-content">
              <p
                class="text-gray-600 dark:text-gray-300 line-clamp-4 mb-4 bio-text"
              >
                {t("bio_joaquin")}
              </p>
              <p
                class="text-gray-600 dark:text-gray-300 mb-4 bio-text-full hidden"
              >
                {t("bio_joaquin")}
              </p>
              <button
                class="text-primary hover:text-primary-dark font-medium transition-colors read-more-btn"
              >
                {t("read_more")}
              </button>
            </div>
          </div>
        </div>

        <!-- Director 2 -->
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden"
        >
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center mb-6">
              <div
                class="w-32 h-32 rounded-full overflow-hidden mb-4 sm:mb-0 sm:mr-6"
              >
                <img
                  src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755987561/DSC06214_cropped_ywny8o.jpg"
                  alt="Mar Targarona"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="text-center sm:text-left">
                <h3 class="text-2xl font-bold mb-2">Mar Targarona</h3>
              </div>
            </div>
            <div class="relative bio-content">
              <p
                class="text-gray-600 dark:text-gray-300 line-clamp-4 mb-4 bio-text"
              >
                {t("bio_mar")}
              </p>
              <p
                class="text-gray-600 dark:text-gray-300 mb-4 bio-text-full hidden"
              >
                {t("bio_mar")}
              </p>
              <button
                class="text-primary hover:text-primary-dark font-medium transition-colors read-more-btn"
              >
                {t("read_more")}
              </button>
            </div>
          </div>
        </div>

        <!-- Director 3 -->
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden"
        >
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center mb-6">
              <div
                class="w-32 h-32 rounded-full overflow-hidden mb-4 sm:mb-0 sm:mr-6"
              >
                <img
                  src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755987560/DSC05992_cropped_swdpaw.jpg"
                  alt="Marina Padró"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="text-center sm:text-left">
                <h3 class="text-2xl font-bold mb-2">Marina Padró</h3>
              </div>
            </div>
            <div class="relative bio-content">
              <p
                class="text-gray-600 dark:text-gray-300 line-clamp-4 mb-4 bio-text"
              >
                {t("bio_marina")}
              </p>
              <p
                class="text-gray-600 dark:text-gray-300 mb-4 bio-text-full hidden"
              >
                {t("bio_marina")}
              </p>
              <button
                class="text-primary hover:text-primary-dark font-medium transition-colors read-more-btn"
              >
                {t("read_more")}
              </button>
            </div>
          </div>
        </div>

        <!-- Director 4 -->
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden"
        >
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center mb-6">
              <div
                class="w-32 h-32 rounded-full overflow-hidden mb-4 sm:mb-0 sm:mr-6"
              >
                <img
                  src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755987560/DSC05771_cropped_qff1db.jpg"
                  alt="Daniel Padró"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="text-center sm:text-left">
                <h3 class="text-2xl font-bold mb-2">Daniel Padró</h3>
              </div>
            </div>
            <div class="relative bio-content">
              <p
                class="text-gray-600 dark:text-gray-300 line-clamp-4 mb-4 bio-text"
              >
                {t("bio_daniel")}
              </p>
              <p
                class="text-gray-600 dark:text-gray-300 mb-4 bio-text-full hidden"
              >
                {t("bio_daniel")}
              </p>
              <button
                class="text-primary hover:text-primary-dark font-medium transition-colors read-more-btn"
              >
                {t("read_more")}
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Historia de la empresa -->
    <section class="mb-16 max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold mb-6 text-primary">{t("our_history")}</h2>
      <p class="text-lg text-gray-600 dark:text-gray-300 mb-6">
        {t("history_p1")}
      </p>
      <p class="text-lg text-gray-600 dark:text-gray-300">
        {t("history_p2")}
      </p>
    </section>

    <!-- Misión y Visión -->
    <!-- <section class="mb-16 max-w-4xl mx-auto">
      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-md">
          <h3 class="text-2xl font-bold mb-4 text-primary">{t("mission")}</h3>
          <p class="text-gray-600 dark:text-gray-300">
            {t("mission_text")}
          </p>
        </div>
        <div class="bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-md">
          <h3 class="text-2xl font-bold mb-4 text-primary">{t("vision")}</h3>
          <p class="text-gray-600 dark:text-gray-300">
            {t("vision_text")}
          </p>
        </div>
      </div>
    </section> -->

    <!-- Premios -->
    <section class="mb-16 max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold mb-8 text-center">{t("achievements")}</h2>

      <div
        class="space-y-8 text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-md"
      >
        <div>
          <h3 class="text-xl font-semibold mb-2 text-primary">
            {t("achievements_cannes_title")}
          </h3>
          <p class="mb-4">{t("achievements_cannes_desc")}</p>
        </div>

        <div>
          <h3 class="text-xl font-semibold mb-2 text-primary">
            {t("achievements_film_awards_title")}
          </h3>
          <p class="mb-2">
            <span class="font-medium">{t("achievements_forque_title")}</span><br
            />
            {t("achievements_forque_desc")}
          </p>
          <p class="mb-2">
            <span class="font-medium">{t("achievements_paris_title")}</span><br
            />
            {t("achievements_paris_desc")}
          </p>
          <p class="mb-2">
            <span class="font-medium">{t("achievements_goya_title")}</span><br
            />
            {t("achievements_goya_desc")}
          </p>
        </div>

        <div>
          <h3 class="text-xl font-semibold mb-2 text-primary">
            {t("achievements_nominations_title")}
          </h3>
          <p class="mb-1">{t("achievements_nominations_filmaffinity")}</p>
          <ul class="list-disc pl-5 mb-2">
            <li>{t("achievements_nominations_list1")}</li>
            <li>{t("achievements_nominations_list2")}</li>
            <li>{t("achievements_nominations_list3")}</li>
          </ul>
        </div>

        <div>
          <h3 class="text-xl font-semibold mb-2 text-primary">
            {t("achievements_trajectory_title")}
          </h3>
          <p class="mb-2">{t("achievements_foundation")}</p>
          <p class="mb-2">{t("achievements_first_film")}</p>
          <p class="mb-1">{t("achievements_other_productions")}</p>
          <ul class="list-disc pl-5 mb-2 grid grid-cols-1 md:grid-cols-2 gap-1">
            <li>{t("achievements_film1")}</li>
            <li>{t("achievements_film2")}</li>
            <li>{t("achievements_film3")}</li>
            <li>{t("achievements_film4")}</li>
            <li>{t("achievements_film5")}</li>
            <li>{t("achievements_film6")}</li>
            <li>{t("achievements_film7")}</li>
            <li>{t("achievements_film8")}</li>
          </ul>
        </div>

        <div>
          <h3 class="text-xl font-semibold mb-2 text-primary">
            {t("achievements_talent_title")}
          </h3>
          <p>{t("achievements_talent_desc")}</p>
        </div>

        <div>
          <h3 class="text-xl font-semibold mb-2 text-primary">
            {t("achievements_recent_title")}
          </h3>
          <p class="mb-2">{t("achievements_recent_desc1")}</p>
          <p class="mb-2">{t("achievements_recent_desc2")}</p>
          <p>{t("achievements_recent_desc3")}</p>
        </div>
      </div>
    </section>
    <!-- Se ha eliminado la sección CTA de contacto -->
  </div>
</Layout>

<script>
  // Obtener todos los botones "Leer más"
  const readMoreButtons = document.querySelectorAll(".read-more-btn");
  const translations = {
    es: { expanded: "Leer menos", collapsed: "Leer más" },
    en: { expanded: "Read less", collapsed: "Read more" },
    ca: { expanded: "Llegir menys", collapsed: "Llegir més" },
  };

  // Obtener el idioma actual
  const currentLang = document.documentElement.lang || "es";

  readMoreButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const bioContent = button.closest(".bio-content");
      if (!bioContent) return;

      const truncatedText = bioContent.querySelector(".bio-text");
      const fullText = bioContent.querySelector(".bio-text-full");
      if (!truncatedText || !fullText || !(button instanceof HTMLElement))
        return;

      // Alternar la visibilidad de los textos
      truncatedText.classList.toggle("hidden");
      fullText.classList.toggle("hidden");

      // Actualizar el texto del botón
      const isExpanded = truncatedText.classList.contains("hidden");
      const lang = currentLang as keyof typeof translations;
      button.textContent =
        translations[lang][isExpanded ? "expanded" : "collapsed"];
    });
  });
</script>
