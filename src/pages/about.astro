---
import Layout from "../layouts/Layout.astro";   
    
//import { useTranslations } from "../i18n/languages";
//import { getLanguageFromUrl } from "../lib/language";
import { useTranslations, defaultLanguage } from "../i18n/languages";
//const lang = getLanguageFromUrl(Astro.url);
//const t = useTranslations(lang);
// Obtener el idioma actual
const lang = (Astro.locals as any)?.lang || defaultLanguage;
const t = useTranslations(lang);
---

<Layout
  title={`${t('about_title')} - Rodar y Rodar`}
  description={`${t('about_title')} - Rodar y Rodar`}
>
  <div class="container mx-auto px-4 py-12">
    <h1 class="text-4xl font-bold mb-8 text-center">{t('about_title')}</h1>

    <!-- Imagen principal -->
    <div class="w-11/12 md:w-4/5 lg:w-3/4 mx-auto mb-16">
      <img
      src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755689015/DSC06745_yiiqzo_jurle2_a40d96.jpg"
      alt="Rodar y Rodar panorámica"
      class="w-full h-auto rounded-lg shadow-lg"
      />
    </div>


    <!-- Historia de la empresa -->
    <section class="mb-16 max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold mb-6 text-primary">{t('our_history')}</h2>
      <p class="text-lg text-gray-600 dark:text-gray-300 mb-6">
        {t('history_p1')}
      </p>
      <p class="text-lg text-gray-600 dark:text-gray-300">
        {t('history_p2')}
      </p>
    </section>

    <!-- Misión y Visión -->
    <section class="mb-16 max-w-4xl mx-auto">
      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-md">
          <h3 class="text-2xl font-bold mb-4 text-primary">{t('mission')}</h3>
          <p class="text-gray-600 dark:text-gray-300">
            {t('mission_text')}
          </p>
        </div>
        <div class="bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-md">
          <h3 class="text-2xl font-bold mb-4 text-primary">{t('vision')}</h3>
          <p class="text-gray-600 dark:text-gray-300">
            {t('vision_text')}
          </p>
        </div>
      </div>
    </section>

    <!-- Equipo directivo -->
    <section class="mb-16">
      <h2 class="text-3xl font-bold mb-10 text-center">{t('management_team')}</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Director 1 -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center mb-6">
              <div class="w-32 h-32 rounded-full overflow-hidden mb-4 sm:mb-0 sm:mr-6">
                <img
                  src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755676455/DSC06420_jkysvj_sidrxn.jpg"
                  alt="Joaquín Padró"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="text-center sm:text-left">
                <h3 class="text-2xl font-bold mb-2">Joaquín Padró</h3>
              </div>
            </div>
            <div class="relative bio-content">
              <p class="text-gray-600 dark:text-gray-300 line-clamp-4 mb-4 bio-text">
                {t('bio_joaquin')}
              </p>
              <p class="text-gray-600 dark:text-gray-300 mb-4 bio-text-full hidden">
                {t('bio_joaquin')}
              </p>
              <button class="text-primary hover:text-primary-dark font-medium transition-colors read-more-btn">
                {t('read_more')}
              </button>
            </div>
          </div>
        </div>

        <!-- Director 2 -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center mb-6">
              <div class="w-32 h-32 rounded-full overflow-hidden mb-4 sm:mb-0 sm:mr-6">
                <img
                  src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755676145/DSC06190_dcrftd_nhkhya.jpg"
                  alt="Mar Targarona"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="text-center sm:text-left">
                <h3 class="text-2xl font-bold mb-2">Mar Targarona</h3>
              </div>
            </div>
            <div class="relative bio-content">
              <p class="text-gray-600 dark:text-gray-300 line-clamp-4 mb-4 bio-text">
                {t('bio_mar')}
              </p>
              <p class="text-gray-600 dark:text-gray-300 mb-4 bio-text-full hidden">
                {t('bio_mar')}
              </p>
              <button class="text-primary hover:text-primary-dark font-medium transition-colors read-more-btn">
                {t('read_more')}
              </button>
            </div>
          </div>
        </div>

        <!-- Director 3 -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center mb-6">
              <div class="w-32 h-32 rounded-full overflow-hidden mb-4 sm:mb-0 sm:mr-6">
                <img
                  src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755629951/DSC05992_d2vq97_psbqvr.jpg"
                  alt="Marina Padró"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="text-center sm:text-left">
                <h3 class="text-2xl font-bold mb-2">Marina Padró</h3>
              </div>
            </div>
            <div class="relative bio-content">
              <p class="text-gray-600 dark:text-gray-300 line-clamp-4 mb-4 bio-text">
                {t('bio_marina')}
              </p>
              <p class="text-gray-600 dark:text-gray-300 mb-4 bio-text-full hidden">
                {t('bio_marina')}
              </p>
              <button class="text-primary hover:text-primary-dark font-medium transition-colors read-more-btn">
                {t('read_more')}
              </button>
            </div>
          </div>
        </div>

        <!-- Director 4 -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center mb-6">
              <div class="w-32 h-32 rounded-full overflow-hidden mb-4 sm:mb-0 sm:mr-6">
                <img
                  src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755632244/DSC05771_ob7w9q_k7z3tc.jpg"
                  alt="Daniel Padró"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="text-center sm:text-left">
                <h3 class="text-2xl font-bold mb-2">Daniel Padró</h3>
              </div>
            </div>
            <div class="relative bio-content">
              <p class="text-gray-600 dark:text-gray-300 line-clamp-4 mb-4 bio-text">
                {t('bio_daniel')}
              </p>
              <p class="text-gray-600 dark:text-gray-300 mb-4 bio-text-full hidden">
                {t('bio_daniel')}
              </p>
              <button class="text-primary hover:text-primary-dark font-medium transition-colors read-more-btn">
                {t('read_more')}
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Logros -->
    <section class="mb-16 max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold mb-8 text-center">{t('achievements')}</h2>
      <div class="bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-md">
        <ul class="space-y-4 text-gray-600 dark:text-gray-300">
          <li class="flex items-start">
            <svg ...></svg>
            <span>{t('achievement_1')}</span>
          </li>
          <li class="flex items-start">
            <svg ...></svg>
            <span>{t('achievement_2')}</span>
          </li>
          <li class="flex items-start">
            <svg ...></svg>
            <span>{t('achievement_3')}</span>
          </li>
          <li class="flex items-start">
            <svg ...></svg>
            <span>{t('achievement_4')}</span>
          </li>
          <li class="flex items-start">
            <svg ...></svg>
            <span>{t('achievement_5')}</span>
          </li>
        </ul>
      </div>
    </section>

    <!-- CTA de Contacto -->
    <section class="text-center max-w-3xl mx-auto">
      <h2 class="text-2xl font-bold mb-6">{t('work_with_us')}</h2>
      <p class="text-lg text-gray-600 dark:text-gray-300 mb-8">
        {t('contact_cta')}
      </p>
      <a
        href="mailto:contacto@rodayrodar.com"
        class="inline-block px-8 py-4 bg-primary text-white font-medium rounded-lg hover:bg-red-700 transition shadow-md text-lg"
      >
        {t('contact_button')}
      </a>
    </section>
  </div>
</Layout>

<script>
  // Obtener todos los botones "Leer más"
  const readMoreButtons = document.querySelectorAll('.read-more-btn');
  const translations = {
    'es': { expanded: 'Leer menos', collapsed: 'Leer más' },
    'en': { expanded: 'Read less', collapsed: 'Read more' },
    'ca': { expanded: 'Llegir menys', collapsed: 'Llegir més' }
  };

  // Obtener el idioma actual
  const currentLang = document.documentElement.lang || 'es';

  readMoreButtons.forEach(button => {
    button.addEventListener('click', () => {
      const bioContent = button.closest('.bio-content');
      if (!bioContent) return;

      const truncatedText = bioContent.querySelector('.bio-text');
      const fullText = bioContent.querySelector('.bio-text-full');
      if (!truncatedText || !fullText || !(button instanceof HTMLElement)) return;
      
      // Alternar la visibilidad de los textos
      truncatedText.classList.toggle('hidden');
      fullText.classList.toggle('hidden');
      
      // Actualizar el texto del botón
      const isExpanded = truncatedText.classList.contains('hidden');
      const lang = currentLang as keyof typeof translations;
      button.textContent = translations[lang][isExpanded ? 'expanded' : 'collapsed'];
    });
  });
</script>
