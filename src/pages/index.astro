---
import Layout from "../layouts/Layout.astro";
import { useTranslations, defaultLanguage } from "../i18n/languages";

// Obtener idioma actual
const lang = (Astro.locals as any)?.lang || defaultLanguage;
const t = useTranslations(lang);
---

<Layout>
  <!-- Hero Section -->
  <section class="py-24 relative bg-gray-900">
    <!-- Imagen de fondo con superposición -->
    <div class="absolute inset-0 overflow-hidden">
      <img
        src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1755791964/IMG_0054_tkknqf.png"
        alt="Film background"
        class="w-full h-full object-cover opacity-50"
      />
      <div
        class="absolute inset-0 bg-gradient-to-b from-black/70 to-gray-900/90"
      >
      </div>
    </div>

    <div class="container mx-auto px-4 text-center relative z-10">
      <h1 class="text-5xl text-center md:text-6xl font-bold mb-6 text-white">
        Rodar y Rodar
      </h1>
    </div>
  </section>
  <section class="bg-white dark:bg-gray-900 overflow-hidden">
    <div class="relative">
      <div id="infinite-carousel" class="flex min-w-max">
        <!-- Imágenes originales + duplicadas para scroll infinito -->
        <div class="flex">
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242019/matthausen_deco_0145_QV_6145_en0uwu.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >El fotógrafo de Mauthausen</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242015/matthausen_deco_0041_QV_7357_mcrmss.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >El fotógrafo de Mauthausen</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242013/Foto_DOS_230720_AltaResolución_0103_qp5d5h.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >Dos</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242010/Foto_DOS_230720_AltaResolución_0032_ymgfdd.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >Dos</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242007/_MGL7455_rmewxr.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >El cuco</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761241992/_MGL0801_ollnnb.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >El cuco</span
              >
            </div>
          </div>
        </div>
        <!-- Duplicado para scroll infinito -->
        <div class="flex">
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242019/matthausen_deco_0145_QV_6145_en0uwu.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >El fotógrafo de Mauthausen</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242015/matthausen_deco_0041_QV_7357_mcrmss.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >El fotógrafo de Mauthausen</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242013/Foto_DOS_230720_AltaResolución_0103_qp5d5h.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >Dos</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242010/Foto_DOS_230720_AltaResolución_0032_ymgfdd.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >Dos</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761242007/_MGL7455_rmewxr.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >El cuco</span
              >
            </div>
          </div>
          <div
            class="w-[600px] h-96 flex-shrink-0 group relative cursor-pointer"
          >
            <img
              src="https://res.cloudinary.com/dxytyvnn2/image/upload/v1761241992/_MGL0801_ollnnb.jpg"
              alt="Producción cinematográfica"
              class="w-full h-full object-cover"
            />
            <div
              class="absolute inset-0 flex items-center justify-center bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
              onclick="this.classList.toggle('opacity-100')"
            >
              <span class="text-white text-xl font-bold px-4 py-2 rounded"
                >El cuco</span
              >
            </div>
          </div>
        </div>
      </div>
      <!-- Gradiente para difuminar los bordes -->
      <div
        class="absolute inset-y-0 left-0 w-20 bg-gradient-to-r from-white dark:from-gray-900 to-transparent z-10"
      >
      </div>
      <div
        class="absolute inset-y-0 right-0 w-20 bg-gradient-to-l from-white dark:from-gray-900 to-transparent z-10"
      >
      </div>
      <script is:inline>
        // Este script implementa un scroll infinito profesional para el carrusel
        window.addEventListener("DOMContentLoaded", () => {
          const carousel = document.getElementById("infinite-carousel");
          if (!carousel) return;

          const totalWidth = carousel.scrollWidth / 2; // Solo las imágenes originales
          let start = null;
          let currentX = 0;
          const speed = 0.5; // píxeles por frame, ajusta para más rápido/lento

          function step(ts) {
            if (!start) start = ts;
            const elapsed = ts - start;
            currentX -= speed;
            if (Math.abs(currentX) >= totalWidth) {
              currentX = 0;
              start = ts;
            }
            carousel.style.transform = `translateX(${currentX}px)`;
            requestAnimationFrame(step);
          }

          carousel.style.willChange = "transform";
          requestAnimationFrame(step);
        });
      </script>
    </div>
  </section>
</Layout>
